<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Calvin Real Estate - Direct deals on premium Nairobi properties. Trusted since 2025.">
    <title>Calvin Real Estate - Nairobi Direct Deals</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<header>
    <nav>
        <h1>Calvin Real Estate</h1>
        <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#properties">Featured</a></li>
            <li><a href="#gallery">Listings</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
    </nav>
    <button id="themeToggle">üåô</button>
</header>

<section class="hero" id="home">
    <div class="hero-overlay"></div>
    <div class="hero-content">
        <h2>Nairobi's Direct Deal King</h2>
        <p class="subline">Since 2025 ‚Ä¢ 100+ Properties Closed ‚Ä¢ Trusted in Westlands, Karen & Kileleshwa</p>
        <p class="claim">Zero Hidden Fees ‚Ä¢ Close in 30 Days or I Work for Free</p>
        <a href="#gallery" class="btn-hero">Browse All Listings</a>
    </div>
</section>

<section id="about">
    <h2>About Calvin</h2>
    <p>Direct deals. Real results. No middlemen. I connect serious buyers with verified properties across Nairobi.</p>
</section>

<section id="properties">
    <h2>Featured Properties</h2>
    <div class="property-grid">
        <article class="property-card">
            <img src="{{ url_for('static', filename='pexels2.jpeg') }}" alt="Luxury Villa">
            <h3>Luxury Villa ‚Äì Westlands</h3>
            <p>5 Bed ‚Ä¢ Pool ‚Ä¢ KES 65M</p>
        </article>
        <article class="property-card">
            <img src="{{ url_for('static', filename='pexels3.jpeg') }}" alt="Penthouse">
            <h3>Penthouse ‚Äì Kileleshwa</h3>
            <p>3 Bed ‚Ä¢ City View ‚Ä¢ KES 28M</p>
        </article>
    </div>
</section>

<section id="gallery">
    <h2>Latest Listings</h2>
    <div class="gallery" id="property-container"></div>
</section>

<!-- LUXURIOUS TESTIMONIALS -->
<section id="testimonials">
    <h2>What Clients Say</h2>
    <div class="testimonials-luxury">
        <div class="testimonial">
            <div class="quote-icon">‚Äú</div>
            <p class="quote-text">Calvin saved me millions with a direct deal ‚Äî best in Nairobi!</p>
            <div class="quote-icon end">‚Äù</div>
            <div class="client-info">
                <img src="{{ url_for('static', filename='client1.jpg') }}" alt="John K." class="client-photo" onerror="this.src='https://via.placeholder.com/60'">
                <strong>John K., Westlands Buyer</strong>
            </div>
        </div>
        <div class="testimonial">
            <div class="quote-icon">‚Äú</div>
            <p class="quote-text">Fast, honest, no drama. Sold my Karen home in 2 weeks.</p>
            <div class="quote-icon end">‚Äù</div>
            <div class="client-info">
                <img src="{{ url_for('static', filename='client2.jpg') }}" alt="Sarah M." class="client-photo" onerror="this.src='https://via.placeholder.com/60'">
                <strong>Sarah M., Seller</strong>
            </div>
        </div>
        <div class="testimonial">
            <div class="quote-icon">‚Äú</div>
            <p class="quote-text">Professional from start to finish. Highly recommend Calvin.</p>
            <div class="quote-icon end">‚Äù</div>
            <div class="client-info">
                <img src="{{ url_for('static', filename='client3.jpg') }}" alt="Mike O." class="client-photo" onerror="this.src='https://via.placeholder.com/60'">
                <strong>Mike O., Kileleshwa Investor</strong>
            </div>
        </div>
    </div>
</section>

<section id="contact">
    <h2>Contact Calvin Directly</h2>
    <p>üìû <strong>0796 250 286</strong> ‚Ä¢ Available on WhatsApp</p>
    <form id="contactForm">
        <input type="text" id="name" placeholder="Your Name" required>
        <input type="email" id="email" placeholder="Your Email or Phone" required>
        <textarea id="message" placeholder="Tell me what you're looking for..." required></textarea>
        <button type="submit">Send Message ‚Üí</button>
    </form>
    <div id="toast" class="toast"></div>
</section>

<footer>
    <p>¬© 2025 Calvin Real Estate | Nairobi, Kenya</p>
</footer>

<script>
// Dark mode toggle
const toggle = document.getElementById('themeToggle');
toggle.onclick = () => {
  document.body.classList.toggle('dark-mode');
  toggle.innerHTML = document.body.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô';
};

// Gallery load
fetch('/static/properties.json?t=' + Date.now())
  .then(r => r.ok ? r.json() : [])
  .then(props => {
    const c = document.getElementById('property-container');
    if (!props.length) {
      c.innerHTML = '<p style="text-align:center;color:gold;">New listings coming soon</p>';
      return;
    }
    props.forEach(p => {
      const hot = p.price && p.price.includes('M') && parseFloat(p.price) < 30;
      c.innerHTML += `
        <article class="property">
          ${hot ? '<span class="badge hot">HOT DEAL</span>' : ''}
          <img src="/static/gallery/${p.img}" alt="${p.title}">
          <div class="overlay">
            <a href="https://wa.me/254796250286?text=Hi Calvin, interested in ${encodeURIComponent(p.title + ' - ' + p.price)}" class="quick-cta">Quick Inquiry</a>
          </div>
          <h3>${p.title}</h3>
          <p>${p.desc}</p>
          <p class="price">${p.price}</p>
        </article>`;
    });
  });

// Contact form toast
const form = document.getElementById('contactForm');
const toast = document.getElementById('toast');
form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const data = {
    name: document.getElementById('name').value,
    email: document.getElementById('email').value,
    message: document.getElementById('message').value
  };
  try {
    const res = await fetch('/contact', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify(data)
    });
    const json = await res.json();
    showToast(json.message || 'Sent!', false);
    form.reset();
  } catch {
    showToast('Error ‚Äî try again', true);
  }
});
function showToast(msg, error=false) {
  toast.textContent = msg;
  toast.style.background = error ? 'darkred' : '#001f3f';
  toast.classList.add('show');
  setTimeout(() => toast.classList.remove('show'), 4000);
}
</script>

</body>
</html>