<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Calvin Real Estate - Premium houses & land for sale in Nairobi. Direct deals.">
    <title>Calvin Real Estate Agencies â€“ Nairobi Properties</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<header>
    <nav>
        <h1>Calvin Real Estate</h1>
        <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#properties">Properties</a></li>
            <li><a href="#gallery">Listings</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
    </nav>
</header>

<section class="hero" id="home">
    <h2>Your Dream Home Awaits</h2>
    <p>Premium properties â€¢ Direct deals â€¢ Zero stress</p>
    <a href="#contact" class="btn-hero">Talk to Calvin Now</a>
</section>

<section id="about">
    <h2>About Us</h2>
    <p>Connecting serious buyers with verified properties in Nairobi since 2025.</p>
</section>

<section id="properties">
    <h2>Featured Properties</h2>
    <div class="property-grid">
        <article class="property-card">
            <img src="{{ url_for('static', filename='pexels2.jpeg') }}" alt="Villa">
            <h3>Luxury Villa â€“ Westlands</h3>
            <p>5 Bed â€¢ Pool â€¢ KES 65M</p>
        </article>
        <article class="property-card">
            <img src="{{ url_for('static', filename='pexels3.jpeg') }}" alt="Penthouse">
            <h3>Penthouse â€“ Kileleshwa</h3>
            <p>3 Bed â€¢ City View â€¢ KES 28M</p>
        </article>
    </div>
</section>

<section id="gallery">
    <h2>Latest Listings</h2>
    <div class="gallery" id="property-container">
        <p style="text-align:center;color:#888;">Loading your properties...</p>
    </div>
</section>

<section id="contact">
    <h2>Contact Calvin</h2>
    <p>ðŸ“ž <strong>0796 250 286</strong> â€¢ WhatsApp ready</p>
    <form id="contactForm">
        <input type="text" id="name" placeholder="Name" required>
        <input type="email" id="email" placeholder="Email or Phone" required>
        <textarea id="message" placeholder="What are you looking for?" required></textarea>
        <button type="submit">Send â†’</button>
    </form>
    <div id="toast" class="toast"></div>
</section>

<footer>
    <p>Â© 2025 Calvin Real Estate | Nairobi, Kenya</p>
</footer>

<!-- DARK MODE BUTTON -->
<button id="themeToggle" style="position:fixed;top:15px;right:15px;z-index:9999;background:#001f3f;color:gold;padding:12px 18px;border:none;border-radius:50px;font-weight:bold;box-shadow:0 4px 20px rgba(0,0,0,0.4);cursor:pointer;font-size:14px;">
  ðŸŒ™ Dark
</button>

<script>
// Perfect Dark Mode
const btn = document.getElementById('themeToggle');
btn.onclick = () => {
  document.body.classList.toggle('dark-mode');
  btn.innerHTML = document.body.classList.contains('dark-mode') ? 'â˜€ï¸ Light' : 'ðŸŒ™ Dark';
  btn.style.background = document.body.classList.contains('dark-mode') ? '#eee' : '#001f3f';
  btn.style.color = document.body.classList.contains('dark-mode') ? '#001f3f' : 'gold';
};

// Gallery Loader â€“ FINAL BULLETPROOF
fetch('/static/properties.json?' + Date.now())
  .then(r => r.ok ? r.json() : [])
  .then(props => {
    const c = document.getElementById('property-container');
    c.innerHTML = '';
    if (!props.length) {
      c.innerHTML = '<p style="text-align:center;color:#888;">No listings yet â€” add in /admin</p>';
      return;
    }
    props.forEach(p => {
      c.innerHTML += `
        <article class="property">
          <img src="/static/gallery/${p.img}" alt="${p.title}" onerror="this.style.display='none'">
          <h3>${p.title}</h3>
          <p>${p.desc}</p>
          <p style="font-weight:bold;color:gold;font-size:1.5rem;">${p.price}</p>
        </article>`;
    });
  });

// Toast
const form = document.getElementById('contactForm');
const toast = document.getElementById('toast');
form.onsubmit = async e => {
  e.preventDefault();
  const data = {
    name: document.getElementById('name').value,
    email: document.getElementById('email').value,
    message: document.getElementById('message').value
  };
  try {
    const res = await fetch('/contact', {method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});
    const json = await res.json();
    showToast(json.message || 'Sent!', false);
    form.reset();
  } catch { showToast('Error â€” try again', true); }
};
function showToast(msg, err=false) {
  toast.textContent = msg;
  toast.style.background = err ? 'darkred' : '#001f3f';
  toast.classList.add('show');
  setTimeout(() => toast.classList.remove('show'), 4000);
}
</script>

<style>
body.dark-mode { background:#0a0a0a; color:#e0e0e0; }
body.dark-mode header, body.dark-mode footer { background:#001122; }
body.dark-mode .property, body.dark-mode .property-card { background:#1a1a1a; }
body.dark-mode h2, body.dark-mode h3 { color:#ffd700; }
body.dark-mode a { color:#ffd700; }
.toast { position:fixed; bottom:30px; left:50%; transform:translateX(-50%); padding:15px 30px; color:white; border-radius:8px; opacity:0; transition:0.4s; z-index:999; }
.toast.show { opacity:1; bottom:50px; }
</style>

</body>
</html>