<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calvin Real Estate Agencies â€“ Nairobi Premium Properties</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<header>
    <nav>
        <h1>Calvin Real Estate</h1>
        <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#properties">Properties</a></li>
            <li><a href="#gallery">Listings</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
    </nav>
</header>

<section class="hero" id="home">
    <h2>Your Dream Home Awaits</h2>
    <p>Premium properties in Nairobi â€¢ Direct owner deals â€¢ Zero broker drama</p>
    <a href="#contact" class="btn-hero">Talk to Calvin Now</a>
</section>

<section id="about">
    <h2>About Us</h2>
    <p>We specialize in connecting serious buyers with serious sellers across Nairobi since 2025. No middlemen. No stress. Just results.</p>
</section>

<section id="properties">
    <h2>Featured Properties</h2>
    <div class="property-grid">
        <article class="property-card">
            <img src="{{ url_for('static', filename='pexels2.jpeg') }}" alt="Luxury Villa">
            <h3>Luxury Villa â€“ Westlands</h3>
            <p>5 Bed â€¢ 4 Bath â€¢ Pool â€¢ KES 65M</p>
        </article>
        <article class="property-card">
            <img src="{{ url_for('static', filename='pexels3.jpeg') }}" alt="Modern Apartment">
            <h3>Penthouse â€“ Kileleshwa</h3>
            <p>3 Bed â€¢ City View â€¢ KES 28M</p>
        </article>
    </div>
</section>

<!-- DYNAMIC GALLERY â€“ THIS IS THE NEW ONE -->
<section id="gallery">
    <h2>Latest Listings</h2>
    <div class="gallery" id="property-container">
        <p style="text-align:center;color:#888;font-size:1.1rem;">Loading latest properties...</p>
    </div>
</section>

<section id="contact">
    <h2>Contact Calvin Directly</h2>
    <p>ðŸ“ž <strong>0796 250 286</strong> â€¢ Available on WhatsApp</p>
    <form id="contactForm">
        <input type="text" id="name" placeholder="Your Name" required>
        <input type="email" id="email" placeholder="Your Email or Phone" required>
        <textarea id="message" placeholder="Tell me what you're looking for..." required></textarea>
        <button type="submit">Send Message â†’</button>
    </form>
    <div id="toast" class="toast"></div>
</section>

<footer>
    <p>Â© 2025 Calvin Real Estate Agencies | Nairobi, Kenya</p>
</footer>

<script>
// Dynamic gallery
fetch('/static/properties.json')
  .then(r => r.json())
  .then(props => {
    const container = document.getElementById('property-container');
    if (!props || props.length === 0) {
      container.innerHTML = '<p style="text-align:center;color:#888;">No listings yet â€” check back soon!</p>';
      return;
    }
    container.innerHTML = props.map(p => `
      <article class="property">
        <img src="/static/gallery/${p.img}" alt="${p.title}">
        <h3>${p.title}</h3>
        <p>${p.desc}</p>
        <p style="font-weight:bold;color:gold;font-size:1.5rem;margin-top:10px;">${p.price}</p>
      </article>
    `).join('');
  });

// Contact form + toast
const form = document.getElementById('contactForm');
const toast = document.getElementById('toast');
form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const data = {
    name: document.getElementById('name').value,
    email: document.getElementById('email').value,
    message: document.getElementById('message').value
  };
  try {
    const res = await fetch('/contact', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify(data)
    });
    const json = await res.json();
    showToast(json.message || 'Sent!', false);
    form.reset();
  } catch {
    showToast('Network error â€“ try again', true);
  }
});
function showToast(msg, error=false) {
  toast.textContent = msg;
  toast.style.background = error ? 'darkred' : '#001f3f';
  toast.classList.add('show');
  setTimeout(() => toast.classList.remove('show'), 4000);
}
</script>

<style>
.toast { position:fixed; bottom:20px; left:50%; transform:translateX(-50%); padding:15px 30px; color:white; border-radius:8px; opacity:0; transition:0.4s; z-index:999; }
.toast.show { opacity:1; bottom:40px; }
</style>

</body>
</html>