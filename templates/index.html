<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calvin Real Estate Agencies</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<header>
    <nav>
        <h1>Calvin Real Estate Agencies</h1>
        <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#about">About Us</a></li>
            <li><a href="#properties">Properties</a></li>
            <li><a href="#gallery">Gallery</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
    </nav>
</header>

<section class="hero" id="home">
    <h2>Your Dream Home Awaits</h2>
    <p>Find the perfect property with Calvin Real Estate Agencies.</p>
    <a href="#properties" class="btn-hero">View Properties</a>
</section>

<section id="about">
    <h2>About Us</h2>
    <p>We specialize in connecting clients with the best properties in town, offering expert advice and reliable services.</p>
</section>

<section id="properties">
    <h2>Featured Properties</h2>
    <div class="property-grid">
        <article class="property-card">
            <img src="{{ url_for('static', filename='pexels2.jpeg') }}" alt="Luxury Villa">
            <h3>Luxury Villa</h3>
            <p>5 Bedrooms ‚Ä¢ 4 Bathrooms ‚Ä¢ Swimming Pool</p>
        </article>
        <article class="property-card">
            <img src="{{ url_for('static', filename='pexels3.jpeg') }}" alt="Modern Apartment">
            <h3>Modern Apartment</h3>
            <p>3 Bedrooms ‚Ä¢ 2 Bathrooms ‚Ä¢ City View</p>
        </article>
    </div>
</section>

<section id="gallery">
    <h2>Our Listings</h2>
    <div class="gallery">
        <article class="property">
            <img src="{{ url_for('static', filename='pexels.jpeg') }}" alt="Modern Villa">
            <h3>Modern Villa</h3>
            <p>Price: $250,000</p>
        </article>
        <article class="property">
            <img src="{{ url_for('static', filename='pexels1.jpeg') }}" alt="Family House">
            <h3>Family House</h3>
            <p>Price: $180,000</p>
        </article>
        <article class="property">
            <img src="{{ url_for('static', filename='pexels2.jpeg') }}" alt="Luxury Apartment">
            <h3>Luxury Apartment</h3>
            <p>Price: $320,000</p>
        </article>
        <article class="property">
            <img src="{{ url_for('static', filename='pexels4.jpeg') }}" alt="Countryside Home">
            <h3>Countryside Home</h3>
            <p>Price: $150,000</p>
        </article>
    </div>
</section>

<section id="contact">
    <h2>Contact Us</h2>
    <p>üìû Call us at <strong>0796250286</strong></p>
    <form id="contactForm">
        <label for="name">Your Name</label>
        <input type="text" id="name" placeholder="Your Name" required>

        <label for="email">Your Email</label>
        <input type="email" id="email" placeholder="Your Email" required>

        <label for="message">Message</label>
        <textarea id="message" placeholder="Your Message"></textarea>

        <button type="submit">Send Message</button>
    </form>

    <div id="toast" class="toast"></div>
</section>

<footer>
    <p>&copy; 2025 Calvin Real Estate Agencies | All Rights Reserved</p>
    <p><address>üìç Nairobi, Kenya</address></p>
</footer>

<script>
/* Fade-in animation on scroll */
document.addEventListener('DOMContentLoaded', () => {
    const faders = document.querySelectorAll('.property, .property-card');
    const appearOptions = { threshold: 0.1, rootMargin: "0px 0px -50px 0px" };
    const appearOnScroll = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (!entry.isIntersecting) return;
            entry.target.style.opacity = 1;
            entry.target.style.transform = 'translateY(0)';
            observer.unobserve(entry.target);
        });
    }, appearOptions);
    faders.forEach(fader => appearOnScroll.observe(fader));
});

/* Async Contact Form */
const form = document.getElementById('contactForm');
const toast = document.getElementById('toast');

form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const data = {
        name: document.getElementById('name').value,
        email: document.getElementById('email').value,
        message: document.getElementById('message').value
    };
    try {
        const res = await fetch('/contact', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
        });
        const result = await res.json();
        showToast(result.message);
        form.reset();
    } catch(err) {
        showToast('Something went wrong. Try again!', true);
    }
});

function showToast(msg, error=false){
    toast.textContent = msg;
    toast.style.background = error ? 'darkred' : '#001f3f';
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), 3000);
}
</script>

</body>
</html>
