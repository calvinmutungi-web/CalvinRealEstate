<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Calvin Real Estate - Direct deals on premium Nairobi properties. Trusted since 2025.">
    <title>Calvin Real Estate - Nairobi Direct Deals</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<header>
    <nav>
        <h1>Calvin Real Estate</h1>
        <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#properties">Featured</a></li>
            <li><a href="#gallery">Listings</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
    </nav>
    <button id="themeToggle">ðŸŒ™</button>
</header>

<section class="hero" id="home">
    <div class="hero-overlay"></div>
    <div class="hero-content">
        <h2>Nairobi's Direct Deal King</h2>
        <p class="subline">Since 2025 â€¢ 100+ Properties Closed â€¢ Trusted in Westlands, Karen & Kileleshwa</p>
        <p class="claim">Zero Hidden Fees â€¢ Close in 30 Days or I Work for Free</p>
        <a href="#gallery" class="btn-hero">Browse All Listings</a>
    </div>
</section>

<section id="about">
    <h2>About Calvin</h2>
    <p>Direct deals. Real results. No middlemen. I connect serious buyers with verified properties across Nairobi.</p>
</section>

<section id="properties">
    <h2>Featured Properties</h2>
    <div class="property-grid">
        <!-- Your manual featured cards here -->
        <article class="property-card">
            <img src="{{ url_for('static', filename='pexels2.jpeg') }}" alt="Luxury Villa">
            <h3>Luxury Villa â€“ Westlands</h3>
            <p>5 Bed â€¢ Pool â€¢ KES 65M</p>
        </article>
        <article class="property-card">
            <img src="{{ url_for('static', filename='pexels3.jpeg') }}" alt="Penthouse">
            <h3>Penthouse â€“ Kileleshwa</h3>
            <p>3 Bed â€¢ City View â€¢ KES 28M</p>
        </article>
    </div>
</section>

<section id="gallery">
    <h2>Latest Listings</h2>
    <div class="gallery" id="property-container"></div>
</section>

<section id="testimonials">
    <h2>What Clients Say</h2>
    <div class="testimonials-grid">
        <div class="testimonial">
            <p>"Calvin saved me millions with a direct deal â€” best in Nairobi!"</p>
            <strong>â€” John K.</strong>
        </div>
        <div class="testimonial">
            <p>"Fast, honest, no drama. Sold my property in 2 weeks."</p>
            <strong>â€” Sarah M.</strong>
        </div>
        <div class="testimonial">
            <p>"Professional and reliable. Highly recommend."</p>
            <strong>â€” Mike O.</strong>
        </div>
    </div>
</section>

<!-- CONTACT SECTION - PREMIUM, VISIBLE, WORKING -->
<section id="contact">
    <h2>Contact Calvin Directly</h2>
    <p>ðŸ“ž <strong>0796 250 286</strong> â€¢ Available on WhatsApp</p>
    <form id="contactForm">
        <input type="text" id="name" placeholder="Your Name" required>
        <input type="email" id="email" placeholder="Your Email or Phone" required>
        <textarea id="message" placeholder="Tell me what you're looking for..." required></textarea>
        <button type="submit">Send Message â†’</button>
    </form>
    <div id="toast" class="toast"></div>
</section>

<footer>
    <p>Â© 2025 Calvin Real Estate | Nairobi, Kenya</p>
</footer>

<!-- DARK MODE TOGGLE + GALLERY SCRIPT -->
<script>
const toggle = document.getElementById('themeToggle');
toggle.onclick = () => {
  document.body.classList.toggle('dark-mode');
  toggle.innerHTML = document.body.classList.contains('dark-mode') ? 'â˜€ï¸' : 'ðŸŒ™';
};

// Gallery load - premium
fetch('/static/properties.json?t=' + Date.now())
  .then(r => r.ok ? r.json() : [])
  .then(props => {
    const c = document.getElementById('property-container');
    if (!props.length) {
      c.innerHTML = '<p style="text-align:center;color:gold;">New listings coming soon</p>';
      return;
    }
    props.forEach(p => {
      const hot = p.price && p.price.includes('M') && parseFloat(p.price) < 30;
      c.innerHTML += `
        <article class="property">
          ${hot ? '<span class="badge hot">HOT DEAL</span>' : ''}
          <img src="/static/gallery/${p.img}" alt="${p.title}">
          <div class="overlay">
            <a href="https://wa.me/254796250286?text=Hi Calvin, interested in ${encodeURIComponent(p.title + ' - ' + p.price)}" class="quick-cta">Quick Inquiry</a>
          </div>
          <h3>${p.title}</h3>
          <p>${p.desc}</p>
          <p class="price">${p.price}</p>
        </article>`;
    });
  });

// Contact form
const form = document.getElementById('contactForm');
const toast = document.getElementById('toast');
form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const data = {
    name: document.getElementById('name').value,
    email: document.getElementById('email').value,
    message: document.getElementById('message').value
  };
  try {
    const res = await fetch('/contact', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify(data)
    });
    const json = await res.json();
    showToast(json.message || 'Sent!', false);
    form.reset();
  } catch {
    showToast('Error â€” try again', true);
  }
});
function showToast(msg, error=false) {
  toast.textContent = msg;
  toast.style.background = error ? 'darkred' : '#001f3f';
  toast.classList.add('show');
  setTimeout(() => toast.classList.remove('show'), 4000);
}
</script>

</body>
</html>