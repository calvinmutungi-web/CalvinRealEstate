<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CALVIN | Private Office</title>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=CZF4cbUIZkEh4c6cZWN-GXDnurC9WBuOGvL7wPvTq3s"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'CZF4cbUIZkEh4c6cZWN-GXDnurC9WBuOGvL7wPvTq3s');
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Montserrat:wght@100;200;300;400;500&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <style>
        :root { --gold: #D4AF37; --dark: #050505; --light: #ffffff; --subtle: rgba(255,255,255,0.15); }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: var(--dark); color: var(--light); font-family: 'Montserrat'; overflow-x: hidden; scroll-behavior: smooth; }

        /* NAV: VISIBLE & RESPONSIVE */
        nav { 
            position: fixed; width: 100%; padding: clamp(20px, 5vw, 40px) 8%; 
            display: flex; justify-content: space-between; align-items: center; z-index: 1000;
            background: linear-gradient(to bottom, rgba(5,5,5,0.5), transparent);
            backdrop-filter: blur(5px);
        }
        .logo { font-family: 'Cinzel'; font-size: 1.6rem; letter-spacing: 12px; color: var(--light); text-decoration: none; font-weight: 700; }
        .nav-actions { display: flex; gap: 20px; }
        .nav-link { 
            color: #fff; text-decoration: none; font-size: 0.65rem; letter-spacing: 3px; 
            text-transform: uppercase; border: 1px solid var(--subtle); padding: 12px 25px; 
            transition: all 0.4s ease; font-weight: 500;
        }
        .nav-link:hover { border-color: var(--gold); color: var(--gold); background: rgba(212,175,55,0.05); }

        /* HERO: THE SEAMLESS FADE */
        .hero-wrap { 
            position: relative; height: 100vh; overflow: hidden; 
            display: flex; align-items: center; justify-content: center;
            /* Mathematical Gradient Fade for Seamless Transition */
            mask-image: linear-gradient(to bottom, black 85%, transparent 100%);
        }
        .hero-img { 
            position: absolute; inset: 0; 
            background: linear-gradient(to bottom, rgba(5,5,5,0.2), var(--dark) 98%), 
                        url('https://images.pexels.com/photos/323780/pexels-photo-323780.jpeg?auto=compress&cs=tinysrgb&w=1600');
            background-size: cover; background-position: center; z-index: -1;
        }
        .hero-txt h1 { font-family: 'Cinzel'; font-size: clamp(3.5rem, 10vw, 8rem); letter-spacing: 25px; font-weight: 400; text-align: center; }
        .hero-txt p { color: var(--gold); letter-spacing: 8px; text-transform: uppercase; font-size: 0.75rem; text-align: center; margin-bottom: 40px; }

        /* SEARCH FILTERS: PROFESSIONAL & CLEAN */
        .search-row { 
            display: flex; gap: 30px; background: rgba(255,255,255,0.03); 
            padding: 25px 40px; backdrop-filter: blur(20px); border: 1px solid var(--subtle);
            border-radius: 2px;
        }
        .filter-item { display: flex; flex-direction: column; }
        .filter-item label { font-size: 0.55rem; color: var(--gold); letter-spacing: 2px; text-transform: uppercase; margin-bottom: 5px; opacity: 0.8; }
        .filter-item input, .filter-item select { background: transparent; border: none; border-bottom: 1px solid #333; color: #fff; padding: 8px 0; outline: none; min-width: 160px; font-size: 0.85rem; }
        .go-btn { background: var(--gold); color: #000; border: none; padding: 0 40px; font-weight: 600; letter-spacing: 3px; cursor: pointer; text-transform: uppercase; transition: 0.3s; }
        .go-btn:hover { background: #fff; }

        /* PHOTO CARDS: STAGGERED MARVEL */
        .collection { padding: 120px 8%; display: grid; grid-template-columns: repeat(2, 1fr); gap: clamp(80px, 10vw, 150px) 60px; }
        .photo-card { text-decoration: none; color: inherit; display: block; position: relative; }
        .photo-card:nth-child(even) { transform: translateY(100px); }
        .img-box { width: 100%; aspect-ratio: 4/5; overflow: hidden; background: #111; position: relative; }
        .img-box img { width: 100%; height: 100%; object-fit: cover; filter: grayscale(1) brightness(0.8); transition: 1.5s cubic-bezier(0.19, 1, 0.22, 1); }
        .photo-card:hover img { filter: grayscale(0) brightness(1); transform: scale(1.05); }
        .card-meta { padding: 30px 0; }
        .card-meta span { color: var(--gold); font-size: 0.6rem; letter-spacing: 4px; text-transform: uppercase; font-weight: 500; }
        .card-meta h3 { font-family: 'Cinzel'; font-size: clamp(1.5rem, 3vw, 2.2rem); margin: 15px 0; font-weight: 400; letter-spacing: 2px; }

        /* GHOST MAP: REFINED TYPOGRAPHY & GRADIENTS */
        .map-box { 
            height: 90vh; position: relative; background: #000; display: flex; align-items: center; justify-content: center;
            mask-image: linear-gradient(to bottom, transparent, black 15%, black 85%, transparent);
        }
        .map-frame { 
            position: absolute; width: 100%; height: 100%; 
            filter: invert(1) grayscale(1) contrast(1.2) brightness(0.6); 
            opacity: 0.35; z-index: 1; border: none;
        }
        .map-txt { position: relative; z-index: 5; text-align: center; pointer-events: none; }
        .map-txt h2 { 
            font-family: 'Cinzel'; font-size: clamp(4rem, 18vw, 12rem); 
            letter-spacing: 50px; text-indent: 50px; 
            opacity: 0.1; /* High-end Transparent Look */
            color: var(--light);
        }
        .map-txt p { color: var(--gold); letter-spacing: 15px; font-weight: 200; font-size: 0.8rem; margin-bottom: -20px; }

        /* CONTACT: PROFESSIONAL & FRIENDLY */
        .contact-sec { padding: 150px 8%; display: grid; grid-template-columns: 1fr 1fr; gap: 80px; }
        .contact-sec h2 { font-family: 'Cinzel'; font-size: clamp(2.5rem, 5vw, 4rem); margin-bottom: 25px; font-weight: 400; }
        .contact-sec p { color: #888; font-size: 1.05rem; line-height: 1.8; font-weight: 300; max-width: 500px; }

        @media (max-width: 900px) {
            .collection { grid-template-columns: 1fr; gap: 60px; }
            .photo-card:nth-child(even) { transform: translateY(0); }
            .search-row { flex-direction: column; width: 100%; padding: 25px; }
            .contact-sec { grid-template-columns: 1fr; }
            .nav-actions { display: none; } /* Mobile cleanup */
        }
    </style>
</head>
<body>

<nav>
    <a href="/" class="logo">CALVIN</a>
    <div class="nav-actions">
        <a href="#collection" class="nav-link">Our Portfolio</a>
        <a href="/vault/login" class="nav-link" style="border-color: var(--gold);">Client Vault</a>
    </div>
</nav>

<div class="hero-wrap">
    <div class="hero-img"></div>
    <div class="hero-txt">
        <p>Your Trusted Partner in Kenyan Real Estate</p>
        <h1>SIGNATURE</h1>
        
        <form class="search-row" action="/" method="GET">
            <div class="filter-item">
                <label>Preferred Location</label>
                <input type="text" name="q" placeholder="Where would you like to live?">
            </div>
            <div class="filter-item">
                <label>Property Type</label>
                <select name="category">
                    <option value="">View All Assets</option>
                    <option value="Villa">Executive Villas</option>
                    <option value="Penthouse">Luxury Penthouses</option>
                </select>
            </div>
            <button type="submit" class="go-btn">Explore</button>
        </form>
    </div>
</div>

<section class="collection" id="collection">
    {% for p in properties %}
    <a href="#" class="photo-card">
        <div class="img-box">
            <img src="{{ url_for('static', filename=p.image) }}" alt="Luxury Property">
        </div>
        <div class="card-meta">
            <span>Discover {{ p.location }}</span>
            <h3>{{ p.title }}</h3>
            <div style="font-size: 1.3rem; font-weight: 200; opacity: 0.7;">Value Upon Request</div>
        </div>
    </a>
    {% endfor %}
</section>

<section class="map-box">
    <iframe class="map-frame" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d127641.17326463994!2d36.76451845!3d-1.286389!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x182f1172d84d49a7%3A0xf7cf0254b297924c!2sNairobi!5e0!3m2!1sen!2ske!4v1700000000000"></iframe>
    <div class="map-txt">
        <p>LOCATED IN THE HEART OF</p>
        <h2>NAIROBI</h2>
    </div>
</section>

<section class="contact-sec">
    <div>
        <h2>Letâ€™s start a conversation.</h2>
        <p>Whether you are looking to acquire a primary residence or expand your investment portfolio, our team provides the market intelligence and discretion you deserve.</p>
    </div>
    <form class="contact-form" id="leadForm" style="display: flex; flex-direction: column; gap: 20px;">
        <input type="text" name="name" placeholder="How may we address you?" style="background: transparent; border: none; border-bottom: 1px solid #222; color: #fff; padding: 15px 0; outline: none;" required>
        <input type="text" name="phone" placeholder="Phone Number" style="background: transparent; border: none; border-bottom: 1px solid #222; color: #fff; padding: 15px 0; outline: none;" required>
        <button type="submit" class="go-btn" style="height: 60px; margin-top: 20px;">Request a Private Viewing</button>
    </form>
</section>

<script>
    gsap.registerPlugin(ScrollTrigger);

    // Fade and Reveal Logic
    gsap.utils.toArray('.photo-card').forEach(card => {
        gsap.from(card, {
            scrollTrigger: { trigger: card, start: "top 95%" },
            y: 50, opacity: 0, duration: 1.2, ease: "power2.out"
        });
    });

    // Map Word Fade
    gsap.to(".map-txt h2", {
        scrollTrigger: {
            trigger: ".map-box",
            start: "top bottom",
            end: "bottom top",
            scrub: true
        },
        y: -100,
        opacity: 0.3
    });
</script>

</body>
</html>