<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CALVIN | High-End Property Portfolio</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Montserrat:wght@200;300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <style>
        :root { --gold: #D4AF37; --dark: #050505; --soft: #111; --glass: rgba(255, 255, 255, 0.03); }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: var(--dark); color: #fff; font-family: 'Montserrat'; overflow-x: hidden; }

        /* BUTTER SMOOTH NAV */
        nav { 
            position: fixed; width: 100%; padding: 35px 8%; display: flex; 
            justify-content: space-between; align-items: center; z-index: 1000;
            background: linear-gradient(to bottom, rgba(5,5,5,0.9), transparent);
            backdrop-filter: blur(10px); border-bottom: 1px solid var(--glass);
        }
        .logo { font-family: 'Cinzel'; font-size: 1.8rem; letter-spacing: 12px; color: var(--gold); text-decoration: none; font-weight: 700; }

        /* HERO SECTION */
        .hero { 
            height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;
            background: radial-gradient(circle at center, rgba(212,175,55,0.05) 0%, transparent 70%), var(--dark);
        }
        .hero h1 { font-family: 'Cinzel'; font-size: clamp(3rem, 10vw, 8rem); letter-spacing: 20px; line-height: 1; margin-bottom: 20px; }
        .hero p { color: var(--gold); letter-spacing: 8px; font-size: 0.9rem; text-transform: uppercase; margin-bottom: 50px; }

        /* SEARCH CONCIERGE */
        .search-bar { 
            background: var(--glass); padding: 30px; border: 1px solid #222; 
            width: 80%; max-width: 1000px; display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 20px;
            backdrop-filter: blur(20px); border-radius: 2px;
        }
        .search-bar input, .search-bar select { 
            background: transparent; border: none; border-bottom: 1px solid #333; 
            color: #fff; padding: 10px; font-family: inherit; font-size: 0.8rem; outline: none;
        }
        .btn-search { background: var(--gold); color: #000; border: none; font-weight: 700; letter-spacing: 2px; text-transform: uppercase; cursor: pointer; }

        /* GRID: THE PORTFOLIO */
        .portfolio { padding: 150px 8%; display: grid; grid-template-columns: repeat(auto-fill, minmax(450px, 1fr)); gap: 80px; }
        .card { position: relative; overflow: hidden; height: 650px; border: 1px solid #111; transition: 0.7s cubic-bezier(0.19, 1, 0.22, 1); }
        .card img { width: 100%; height: 100%; object-fit: cover; transition: 1.5s; filter: brightness(0.7) grayscale(0.5); }
        .card:hover img { transform: scale(1.1); filter: brightness(1) grayscale(0); }
        
        .card-overlay { 
            position: absolute; bottom: 0; left: 0; width: 100%; padding: 50px;
            background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
        }
        .card-overlay h3 { font-family: 'Cinzel'; font-size: 2.2rem; margin-bottom: 10px; }
        .card-overlay .price { color: var(--gold); font-size: 1.5rem; font-weight: 200; }

        /* MAP CARD - LUXURY PLACEMENT */
        .map-section { padding: 100px 8%; }
        .map-card { 
            background: var(--soft); border: 1px solid #222; padding: 10px; 
            box-shadow: 0 50px 100px rgba(0,0,0,0.8); overflow: hidden;
        }
        .map-frame { width: 100%; height: 600px; border: none; filter: invert(90%) hue-rotate(180deg) brightness(0.8); }

        /* SUCCESS MODAL */
        #success-modal { 
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: #000; border: 1px solid var(--gold); padding: 60px; z-index: 2000;
            text-align: center; display: none; box-shadow: 0 0 100px rgba(212,175,55,0.2);
        }

        /* CONTACT FORM */
        .contact-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 100px; padding: 150px 8%; background: #000; }
        .contact-form input, .contact-form textarea {
            width: 100%; background: transparent; border: none; border-bottom: 1px solid #222;
            color: #fff; padding: 25px 0; margin-bottom: 30px; font-size: 1rem; outline: none; transition: 0.5s;
        }
        .contact-form input:focus { border-bottom-color: var(--gold); }

        @media (max-width: 768px) {
            .portfolio { grid-template-columns: 1fr; }
            .search-bar { grid-template-columns: 1fr; }
            .contact-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<div id="success-modal">
    <h1 style="font-family: 'Cinzel'; color: var(--gold); margin-bottom: 20px;">ACQUISITION INITIATED</h1>
    <p style="letter-spacing: 3px;">Calvin will reach out to you via WhatsApp shortly.</p>
    <button onclick="this.parentElement.style.display='none'" style="margin-top: 30px; background: transparent; color: #fff; border: 1px solid #333; padding: 10px 30px; cursor: pointer;">CLOSE</button>
</div>

<nav>
    <a href="/" class="logo">CALVIN</a>
    <div style="letter-spacing: 5px; font-size: 0.6rem; color: var(--gold);">EXCELLENCE DEFINED</div>
</nav>

<section class="hero">
    <p>Nairobi's #1 Premium Curator</p>
    <h1>The Signature Collection</h1>
    <form class="search-bar" action="/" method="GET">
        <input type="text" name="q" placeholder="Enter Location (e.g. Westlands, Runda)">
        <select name="category">
            <option value="">Asset Type</option>
            <option value="Villa">Exclusive Villa</option>
            <option value="Penthouse">Penthouse</option>
            <option value="Land">Strategic Land</option>
        </select>
        <button type="submit" class="btn-search">Find Asset</button>
    </form>
</section>

<div class="portfolio">
    {% for p in properties %}
    <div class="card">
        <img src="{{ url_for('static', filename=p.image) }}" alt="{{ p.title }}">
        <div class="card-overlay">
            <div style="font-size: 0.7rem; letter-spacing: 4px; color: var(--gold);">{{ p.location }}</div>
            <h3>{{ p.title }}</h3>
            <div class="price">KES {{ "{:,}".format(p.price) }}</div>
            <div style="margin-top: 20px; font-size: 0.8rem; display: flex; gap: 20px; opacity: 0.6;">
                <span>{{ p.beds }} Beds</span> | <span>{{ p.baths }} Baths</span> | <span>{{ p.sqft }} SQFT</span>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<section class="map-section">
    <h2 style="font-family: 'Cinzel'; text-align: center; margin-bottom: 50px; letter-spacing: 10px;">GLOBAL REACH</h2>
    <div class="map-card">
        <iframe class="map-frame" src="http://googleusercontent.com/maps.google.com/4"></iframe>
    </div>
</section>

<section class="contact-grid">
    <div>
        <p style="color: var(--gold); letter-spacing: 5px;">PRIVATE OFFICE</p>
        <h2 style="font-family: 'Cinzel'; font-size: 3.5rem; margin: 20px 0;">Acquisition Concierge</h2>
        <p style="color: #666; font-weight: 300; line-height: 2;">Discreet, data-driven, and highly personalized representation for Nairobi's elite property market.</p>
    </div>
    <form class="contact-form" id="leadForm">
        <input type="text" name="name" id="name" placeholder="FULL NAME" required>
        <input type="text" name="phone" id="phone" placeholder="PRIVATE PHONE (254...)" required>
        <textarea name="message" id="message" placeholder="ACQUISITION REQUIREMENTS" rows="4"></textarea>
        <button type="submit" class="btn-search" style="padding: 20px 60px;">Request Callback</button>
    </form>
</section>

<script>
    gsap.registerPlugin(ScrollTrigger);

    // Hero Motion
    gsap.from(".hero h1", { y: 100, opacity: 0, duration: 2, ease: "power4.out" });

    // AJAX Form Handling (Success Message)
    document.getElementById('leadForm').onsubmit = async (e) => {
        e.preventDefault();
        const formData = new FormData(e.target);
        const res = await fetch('/inquire', { method: 'POST', body: formData });
        if(res.ok) {
            document.getElementById('success-modal').style.display = 'block';
            e.target.reset();
        }
    };
</script>

</body>
</html>